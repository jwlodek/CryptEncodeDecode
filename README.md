# Message encoder/decoder

Author: Jakub Wlodek
Created on: May 2018

This program encodes messages with two layers of encryption, given two keys.

If the user has two keys and an encrypted message, the program can also decode it.

### Installation:

Installing and running the program works as follows:
First, clone this repository using
```
git clone https://github.com/jwlodek/CryptEncodeDecode
```
Next, compile the program by simply running
```
make
```
in the appropriate directory. It was compiled on a debian based system using gcc.
For help in using the program, simply run the created executable as follows
```
./encoder_decoder -h
```
OR
```
./encoder_decoder --help
```
This will explain arguments and usage of the program.
From here, you may run the program in either encryption or decryption mode as described below.

### Command Line Arguments:

There are several command line flags/arguments required to run the program. They are as follows:

Flag    |   Description
--------|---------------
-h/--help | Displays help message
-e/-d   | Switches between encryption/decryption. -e encrypts, -d decrypts
-f  |   First key. Used for first encryption, second decryption.
-s | Second key. Used for second encryption, first decryption.
-m | Message. Actual message that will be encrypted/decrypted

### Encryption:

To encrypt a message, you must add the -e flag to the command line, along with the -f, -s, -m flags all followed by strings. The -f flag is required to be longer than 6 characters and shorter than 26. The -s flag is required to be longer than 4 characters and shorter than 10.

An example run of the program in encryption mode is as follows:
```
user@pc:~$./encoder_decoder -e -f FIRST -s SECOND -m MESSAGE
Encoding...The first key is FIRST and the second key is SECOND
The message is MESSAGE
Encoding message...
The encoded message reads: UYMYSLM
```

### Decryption:

To decrypt a message, the same process is used as with encryption, except the -d flag is used as opposed to the -e flag, and the message will be encrypted rather than plaintext English.

An example run of the program in decryption mode is as follows:
```
user@pc:~$./encoder_decoder -d -f FIRST -s SECOND -m UYMYSLM
Decoding...
The first key is FIRST and the second key is SECOND
The message is UYMYSLM
Decoding message...
The decoded message reads: MESSAGE
```

##### NOTE: PLEASE USE ALL CAPS FOR KEYS AND MESSAGE!

### The Method:

To encrypt the messages, two different encryption techniques are concatenated. First, a transpose cypher is applied, followed by a second encryption using a set of alphabets generated by a key. For the transpose encoding, the key is used to map english letters to encoded letters in the following way.

##### Transpose Step:

1) First, the key is stripped of repeating letters.
2) Next, it is placed at the top of a table, which has width equal to the length of the key without the repeating letters. 
3) Third, the remaining letters of the alphabet (the ones not present in the key) are written in one by one horizontally starting below the first letter of the key, and looping back once the width of the table is reached. For example, if the key is FIRST, the table would look as follows:

F   I   R   S   T  
A   B   C   D   E  
G   H   J   K   L   
M   N   O   P   Q  
U   V   W   X   Y  
Z

4) Then, each letter in the message is translated into its encoding by checking its position in the standard alphabet, and counting out this position going downwards in the transpose table. For example, if the message is MESSAGE, the letter 'M' is the 13th letter in the aplphabet, and counting out 13 letters gives us F->A->G->M->U->Z->I->B->H->N->V->R->C. The other letters in the message are encoded similarly.

##### Multi-Alphabet Step:

The next encoding step uses a key to generate multiple alphabets, which are then used to encode the message passed through from the transpose cypher. 

1) First the alphabets are generated in the following way. If SECOND is the second key, the following will be the generated alphabets:

* STUVWXYZABCDEFGHIJKLMNOPQR
* EFGHIJKLMNOPQSTUVWXYZABCD
* CDEFGHIJKLMNOPQRSTUVWXYZAB
* OPQRSTUVWXYZABCDEFGHIJKLMN
* NOPQRSTUVWXYZABCDEFGHIJKLM
* DEFGHIJKLMNOPQRSTUVWXYZABC

2) From here, each letter in the message is mapped to its corresponding letter in the current alphabet. If the message was MESSAGE, the M would map to the 13th letter of the first alphabet, the E to the 5th letter of the second alphabet and so on. This will give us the final decoded message.

##### Decoding:

To decode messages, the same steps are taken, simply in reverse. The multi-alphabet step is undone, and then the transpose step.